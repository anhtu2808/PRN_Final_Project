@page
@model LaptopRentalManagement.Pages.Categories.IndexModel
@{
    ViewData["Title"] = "Categories";
    Layout = "~/Pages/Shared/_CustomerLayout.cshtml";
}

<div class="container py-4">
    <!-- Page Header -->
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-gradient">Browse by Category</h1>
        <p class="lead text-muted">Find the perfect laptop for your specific needs and use case</p>
    </div>

    <!-- Category Table View -->
    <div class="card mb-5 shadow-sm">
        <div class="card-header bg-light">
            <h3 class="mb-0"><i class="fas fa-list me-2"></i>Available Categories</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th><i class="fas fa-tag me-1"></i> Category</th>
                            <th><i class="fas fa-info-circle me-1"></i> Description</th>
                            <th class="text-center"><i class="fas fa-laptop me-1"></i> Laptops</th>
                            <th class="text-center"><i class="fas fa-th-large me-1"></i> Icon</th>
                            <th class="text-center"><i class="fas fa-external-link-alt me-1"></i> Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Categories.Any())
                        {
                            @foreach (var category in Model.Categories)
                            {
                                <tr>
                                    <td class="fw-bold">@category.Name</td>
                                    <td>
                                        @if (!string.IsNullOrEmpty(category.Description))
                                        {
                                            @(category.Description.Length > 80 ? category.Description.Substring(0, 80) + "..." : category.Description)
                                        }
                                        else
                                        {
                                            <span class="text-muted">Explore quality laptops in the @category.Name category</span>
                                        }
                                    </td>
                                    <td class="text-center">
                                        <span class="badge bg-primary rounded-pill">@category.LaptopCount</span>
                                    </td>
                                    <td class="text-center">
                                        @{
                                            string categoryIcon = "fas fa-laptop";
                                            
                                            // Dynamic icons based on category name
                                            var lowerName = category.Name.ToLower();
                                            if (lowerName.Contains("gaming"))
                                            {
                                                categoryIcon = "fas fa-gamepad";
                                            }
                                            else if (lowerName.Contains("business") || lowerName.Contains("office"))
                                            {
                                                categoryIcon = "fas fa-briefcase";
                                            }
                                            else if (lowerName.Contains("student"))
                                            {
                                                categoryIcon = "fas fa-graduation-cap";
                                            }
                                            else if (lowerName.Contains("ultrabook") || lowerName.Contains("thin"))
                                            {
                                                categoryIcon = "fas fa-laptop";
                                            }
                                            else if (lowerName.Contains("workstation"))
                                            {
                                                categoryIcon = "fas fa-desktop";
                                            }
                                        }
                                        <i class="@categoryIcon fa-2x"></i>
                                    </td>
                                    <td class="text-center">
                                        <a href="/laptops?category=@category.CategoryId" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye me-1"></i>View Laptops
                                        </a>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="5" class="text-center py-4">
                                    <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
                                    <h4 class="text-muted">No categories available</h4>
                                    <p class="text-muted">Laptop categories will be updated soon.</p>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Main Categories Grid -->
    <div class="row">
        @if (Model.Categories.Any())
        {
            @foreach (var category in Model.Categories)
            {
                <div class="col-lg-6 col-md-6 mb-4">
                    <a href="/laptops?category=@category.CategoryId" class="category-card-large">
                        <div class="category-image-large">
                            @{
                                string categoryImage = "";
                                string categoryIcon = "fas fa-laptop";
                                
                                // Dynamic images and icons based on category name
                                var lowerName = category.Name.ToLower();
                                if (lowerName.Contains("gaming"))
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-gamepad";
                                }
                                else if (lowerName.Contains("business") || lowerName.Contains("office"))
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-briefcase";
                                }
                                else if (lowerName.Contains("student"))
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-graduation-cap";
                                }
                                else if (lowerName.Contains("ultrabook") || lowerName.Contains("thin"))
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-laptop";
                                }
                                else if (lowerName.Contains("workstation"))
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-desktop";
                                }
                                else
                                {
                                    categoryImage = "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=600&h=400&fit=crop";
                                    categoryIcon = "fas fa-laptop";
                                }
                            }
                            
                            <img src="@categoryImage" alt="@category.Name" class="img-fluid">
                            <div class="category-overlay">
                                <div class="category-icon">
                                    <i class="@categoryIcon"></i>
                                </div>
                                <div class="category-content">
                                    <h3 class="category-title">@category.Name</h3>
                                    <p class="category-description">
                                        @if (!string.IsNullOrEmpty(category.Description))
                                        {
                                            @(category.Description.Length > 80 ? category.Description.Substring(0, 80) + "..." : category.Description)
                                        }
                                        else
                                        {
                                            <text>Explore quality laptops in the @category.Name category</text>
                                        }
                                    </p>
                                    <div class="category-stats">
                                        <span class="laptop-count">@category.LaptopCount laptop@(category.LaptopCount > 1 ? "s" : "")</span>
                                        @if (category.LaptopCount > 0)
                                        {
                                            <span class="price-range"><i class="fas fa-tag me-1"></i>View pricing</span>
                                        }
                                        else
                                        {
                                            <span class="price-range"><i class="fas fa-clock me-1"></i>Coming soon</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        }
        else
        {
            <div class="col-12">
                <div class="text-center py-5">
                    <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">No categories available</h4>
                    <p class="text-muted">Laptop categories will be updated soon.</p>
                </div>
            </div>
        }
    </div>

    <!-- Popular Brands Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="text-center mb-4">Shop by Brand</h2>
            <div class="brands-grid">
                <a href="/laptops?brand=apple" class="brand-card">
                    <div class="brand-logo">
                        <i class="fab fa-apple"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">Apple</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>23</p>
                    </div>
                </a>

                <a href="/laptops?brand=dell" class="brand-card">
                    <div class="brand-logo">
                        <i class="fab fa-dell"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">Dell</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>45</p>
                    </div>
                </a>

                <a href="/laptops?brand=hp" class="brand-card">
                    <div class="brand-logo">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">HP</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>38</p>
                    </div>
                </a>

                <a href="/laptops?brand=lenovo" class="brand-card">
                    <div class="brand-logo">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">Lenovo</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>52</p>
                    </div>
                </a>

                <a href="/laptops?brand=asus" class="brand-card">
                    <div class="brand-logo">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">ASUS</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>31</p>
                    </div>
                </a>

                <a href="/laptops?brand=msi" class="brand-card">
                    <div class="brand-logo">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <div class="brand-info">
                        <h5 class="brand-name">MSI</h5>
                        <p class="brand-count"><i class="fas fa-laptop me-1"></i>19</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="features-section bg-light p-5 rounded">
                <h2 class="text-center mb-4">Why Choose Category-Specific Rentals?</h2>
                <div class="row">
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-item text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-cog fa-2x text-primary"></i>
                            </div>
                            <h5>Optimized Performance</h5>
                            <p class="text-muted">Each laptop is configured for specific use cases and requirements</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-item text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-download fa-2x text-primary"></i>
                            </div>
                            <h5>Pre-installed Software</h5>
                            <p class="text-muted">Comes with essential software for your specific needs</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-item text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-user-graduate fa-2x text-primary"></i>
                            </div>
                            <h5>Expert Support</h5>
                            <p class="text-muted">Category-specific technical support and guidance</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-item text-center">
                            <div class="feature-icon mb-3">
                                <i class="fas fa-dollar-sign fa-2x text-primary"></i>
                            </div>
                            <h5>Best Value</h5>
                            <p class="text-muted">Competitive pricing tailored to each category</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section -->
    <div class="row mt-5">
        <div class="col-12 text-center">
            <div class="cta-section bg-primary text-white p-5 rounded">
                <h3>Can't Find What You're Looking For?</h3>
                <p class="lead mb-4">Contact our experts for personalized laptop recommendations</p>
                <div class="cta-buttons">
                    <a href="/contact" class="btn btn-light btn-lg me-3">
                        <i class="fas fa-phone me-2"></i>Contact Expert
                    </a>
                    <a href="/laptops" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-search me-2"></i>Browse All Laptops
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
